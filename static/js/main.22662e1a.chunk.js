(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAUCAIAAADkwkEeAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAKUlEQVQ4jWP8//8/A4mAiVQNo3qorOfp06dPnz6lpj2Mo+lgVA8DAwMAEH4Lf6M8L0UAAAAASUVORK5CYII="},102:function(e,t,a){e.exports=a.p+"static/media/chats.062ecb77.png"},117:function(e,t,a){e.exports=a(169)},124:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"setPropertyValueForCards",function(){return x}),a.d(r,"calColWidth",function(){return y}),a.d(r,"calColCount",function(){return b}),a.d(r,"layoutBottom",function(){return E}),a.d(r,"layoutHorizontalRowLength",function(){return w}),a.d(r,"getContainerMaxHeight",function(){return v}),a.d(r,"calGridItemPosition",function(){return C}),a.d(r,"checkInContainer",function(){return A}),a.d(r,"calGridXY",function(){return I}),a.d(r,"calWHtoPx",function(){return j});var n=a(1),i=a.n(n),o=a(99),d=a.n(o),c=(a(124),a(21)),l=a(180),s=a(113),p=a(179),u=a(64),g=a(185),h=a(28),m=a.n(h),f=a(91);const x=(e,t,a)=>{m.a.forEach(e,e=>{m.a.forEach(e.cards,e=>{e[t]=a})})},y=(e,t,a,r)=>r?(e-2*a[0]-r[0]*(t+1))/t:(e-2*a[0]-0*(t+1))/t,b=(e,t,a,r)=>{if(r)return 4},E=e=>{let t,a=0;for(let r=0,n=e.length;r<n;r++)(t=e[r].gridy+e[r].height)>a&&(a=t);return a},w=e=>{let t,a=0;for(let r=0,n=e.length;r<n;r++)(t=e[r].gridx+e[r].width)>a&&(a=t);return a},v=(e,t,a)=>{const r=E(e);return r*t+(r-1)*a[1]+2*a[1]},C=(e,t,a,r,n)=>{return{x:Math.round(e*n+a[0]*(e+1)),y:Math.round(t*r+a[1]*(t+1))}},A=(e,t,a,r)=>(e+r>a-1&&(e=a-r),e<0&&(e=0),t<0&&(t=0),{gridX:e,gridY:t}),I=(e,t,a,r,n,i,o)=>{const d=Math.floor(e/n*i),c=Math.floor(t/(o+(r?r[1]:0)));return A(d,c,i,a)},j=(e,t,a,r,n)=>{return{wPx:Math.round(e*n+(e-1)*a[0]),hPx:Math.round(t*r+(t-1)*a[1])}};var O=r;const S=(e,t)=>e.gridx===t.gridx&&e.gridy===t.gridy&&e.width===t.width&&e.height===t.height||!(e.gridx+e.width<=t.gridx)&&(!(e.gridx>=t.gridx+t.width)&&(!(e.gridy+e.height<=t.gridy)&&!(e.gridy>=t.gridy+t.height))),k=(e,t)=>{for(let a=0,r=e.length;a<r;a++)if(S(e[a],t))return e[a];return null},D=function(){const e=function(t,a,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"vertical";const o=[],d=[],l="vertical"===i?"gridy":"gridx";let s=t.map(e=>{if(e.id!==r){if(S(e,a)){o.push(e.id);let t=e[l]+1;const r="gridx"===l?e.width:e.height;a[l]>e[l]&&a[l]<e[l]+r&&(t=e[l]);const n=Object(c.a)({},e);return n[l]=t,d.push(n),n}}else if(n===r)return Object(c.a)(Object(c.a)({},e),a);return e});for(let c=0,p=d.length;c<p;c++)s=e(s,d[c],o[c],n,i);return s};return e}(),z=e=>[].concat(e).sort((e,t)=>e.gridy>t.gridy||e.gridy===t.gridy&&e.gridx>t.gridx?1:e.gridy===t.gridy&&e.gridx===t.gridx?0:-1),N=(e,t)=>{const a=Object(c.a)({},t);if(0===e.length)return Object(c.a)(Object(c.a)({},a),{},{gridy:0});for(;;){const t=k(e,a);if(t)return a.gridy=t.gridy+t.height,a;if(a.gridy--,a.gridy<0)return Object(c.a)(Object(c.a)({},a),{},{gridy:0})}},_=function(e){const t=z(e),a=[],r=Array(e.length);for(let n=0,i=t.length;n<i;n++){const e=N(a,t[n]);a.push(e),r[n]=e}return r},G=(e,t,a)=>{const r=Object(c.a)({},t);return 0===e.length?r:k(e,r)?(r.gridx++,r.gridx+t.width>a&&(r.gridx=0,r.gridy++),G(e,r,a)):r},L=function(e,t,a){const r=z(e),n=[],i=Array(e.length),o=[];let d;for(let c=0;c<r.length;c++)a!==r[c].id?o.push(r[c]):d=r[c];d&&(d.gridy=Math.min(E(o),d.gridy));for(let c=0;c<r.length;c++)a!==r[c].id&&(r[c].gridy=0,r[c].gridx=0);for(let c=0,l=r.length;c<l;c++){const e=G(n,r[c],t);n.push(e),i[c]=e}return i};var P=a(184),T=a(183),F=a(97),W=a(112),M=a(100),R=a(182),H=a(54),B=a(181),V=a(101),U=a.n(V),q=a(102),K=a.n(q);const X=Object(H.a)(B.a.TextArea).withConfig({displayName:"styledComponents__Input",componentId:"sc-1q7y4x3-0"})(["height:28px;font-size:12px;background:transparent;border:none;.ant-input::placeholder{color:#ACAEB0;}"]),Y=H.a.div.withConfig({displayName:"styledComponents__Wrapper",componentId:"sc-1q7y4x3-1"})(["animation:fadeIn 0.1s linear 0s both;position:fixed;z-index:101;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:transparent;.chat{position:fixed;width:350px;z-index:2;.header{border:1px solid #E5E5E5;border-right:0px;background-color:#fff;height:60px;padding:15px 25px;display:flex;justify-content:space-between;.title{svg{margin-right:10px;}padding:5px;font-family:''Montserrat', sans-serif';font-weight:'600';font-size:'20px';}.actions{button{margin-left:15px;}}}.content{background-color:#fefefe;background-image:url(",");background-repeat:no-repeat;background-size:120%;height:100vh;width:350px;position:fixed;overflow:auto;.widgets{width:300px;border-left:1px solid #E5E5E5;height:calc(100vh - 120px);}.chatroom{height:calc(100vh - 210px);overflow:auto;position:relative;.placeholder{display:flex;flex-direction:column;margin-top:20px;div{font-size:12px;background-color:#F8F8FA;color:#464749;border-radius:15px;height:30px;width:fit-content;padding:7px 12px;margin:7px auto;opacity:0.6;cursor:pointer;&:hover{background-color:#EBEDEE;}}}.messages-wrapper{margin:30px 10px;}.chat-container{display:flex;}.loading{display:flex;justify-content:center;margin-top:10px;}.show-widgets{border-radius:20px;border:1px solid #5496EA;color:#5496EA;padding:4px 8px;width:fit-content;margin-left:7px;cursor:pointer;}.right.chat-container{justify-content:end;}.right .chat-bubble{border-radius:16px 16px 0px 16px;background:#F8F8FA;border:1px solid #D4D4D4;color:#000;}.chat-bubble{background:linear-gradient(to left top,rgb(34,225,255),rgb(29,143,225),rgb(98,94,177));color:#fff;width:fit-content;max-width:80%;padding:16px;border-radius:16px 16px 16px 0px;margin:7px;}.input{background-color:#fff;height:150px;position:fixed;bottom:0;width:350px;padding:10px;button{position:fixed;left:265px;bottom:10px;}}}}}"],K.a),J=H.a.div.withConfig({displayName:"styledComponents__CardWrapper",componentId:"sc-1q7y4x3-2"})(["height:100%;width:100%;.ant-card{height:100%;display:flex;flex-direction:column;border-radius:8px;padding:12px 16px;border:1px solid #EBEDEE;box-shadow:0px 2px 4px rgba(51,51,51,0.08);}.ant-card-head{padding:0;border-bottom:none;min-height:0;margin-bottom:10px;}.ant-card-head-title{padding:0;.ant-space{.ant-space-item:last-child{line-height:0;}}}.ant-card-head-wrapper{align-items:start;}.ant-card-extra{padding:0;}.ant-card-body{display:flex;flex-direction:column;flex-grow:1;padding:0;font-size:12px;line-height:16px;}"]),Q=H.a.div.withConfig({displayName:"styledComponents__Canvas",componentId:"sc-1q7y4x3-3"})(["position:fixed;width:calc(100vw - 350px);z-index:2;left:350px;.header{border:1px solid #E5E5E5;background-color:#fff;height:60px;display:flex;justify-content:space-between;padding:15px 25px;.title{padding:5px;font-family:''Montserrat', sans-serif';font-weight:500;font-size:14px;}.actions{button{margin-left:15px;&.black{background-color:#333;color:#fff;}}}}.grid{background-image:url(",");border-left:1px solid #E5E5E5;height:calc(100vh - 60px);overflow:auto;}"],U.a),Z=H.a.div.withConfig({displayName:"styledComponents__Grid",componentId:"sc-1q7y4x3-4"})([".rglb_group-item{width:100%;margin-bottom:30px;cursor:move;position:relative;transition:all 0.2s ease-out;}.rglb_group-item .group-item-container{padding:20px;}.rglb_group-item .group-item-container #card-container .card-shadow{background:rgba(15,15,15,0.3);position:absolute;border-radius:3px;transition:all 0.2s ease-out;}.rglb_group-item .group-item-container #card-container .card{position:absolute;transition:all 0.2s ease-out;.card-actions{display:none;}&:hover .card-actions{display:block;}}.rglb_group-item .group-item-container #card-container .card .card-footer{display:flex;justify-content:space-between;position:absolute;height:35px;width:100%;padding:7px 8px;bottom:0;background:#f2f2f2;}.rglb_group-item .group-item-container #card-container .card .card-footer .card-delete{font-size:19px;line-height:21px;cursor:pointer;}.rglb_custom-layer{position:fixed;pointer-events:none;z-index:100;left:-20px;top:-20px;}.rglb_custom-layer .custom-layer-card-list .layer-card{width:135px;height:135px;border:1px solid #cccccc;background:#fff;position:absolute;display:flex;align-items:center;justify-content:center;}.rglb_custom-layer .custom-layer-card-list .layer-card .layer-card-span{position:absolute;border-radius:50%;width:30px;height:30px;display:inline-block;text-align:center;line-height:30px;}"]),$={pie:{width:1,height:4,currentSizeIndex:0,sizes:[{width:1,height:4},{width:2,height:6},{width:4,height:9}]}},ee=e=>{const t={tooltip:{trigger:"item",position:["50%","50%"]},series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:e.data}]};return console.log("pie: ",e.style),i.a.createElement(W.a,{style:Object(c.a)({},e.style),opts:{renderer:"svg"},option:t})},te=e=>{let{data:t}=e;const[{isDragging:a},r,o]=Object(T.a)({type:ie.CARD,collect:e=>({isDragging:!!e.isDragging()}),item:()=>{return Object(c.a)(Object(c.a)({},t),{},{id:t.id+Object(g.a)(),type:ie.CARD,isShadow:!0},t.chartType?$[t.chartType]:[])}});return Object(n.useEffect)(()=>{o(Object(F.a)(),{captureDraggingState:!0})},[o]),i.a.createElement("div",{ref:r,style:{opacity:a?.5:1,cursor:"move"}},i.a.createElement("div",{style:{margin:"7px",height:"165px",width:"200px"}},i.a.createElement(ae,{data:t})))},ae=e=>{let{data:t}=e;const a=[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}];return i.a.createElement(J,null,i.a.createElement(R.a,{key:t.id,title:t.title||"Chart"},i.a.createElement(M.a,null,e=>{let{height:t,width:r}=e;return i.a.createElement(ee,{style:{width:r,height:t},data:a})})))};var re=e=>{const[,t,a]=Object(T.a)({type:ie.CARD,item:()=>{let t=e.card;return t.isShadow=!0,e.updateShadowCard(t),{id:t.id,type:ie.CARD}},end:(t,a)=>{a.didDrop()||e.dropCard(t,e.group)}});return Object(n.useEffect)(()=>{a(Object(F.a)(),{captureDraggingState:!0})},[a]),i.a.createElement("div",null,i.a.createElement(ne,Object.assign({},e,{drag:t})))};function ne(e){var t;const{groupIndex:a,deleteCard:r,drag:n,card:o}=e,{id:d,gridx:l,gridy:p,width:u,height:g,isShadow:h}=e.card,{margin:f,rowHeight:x,calWidth:y}=e.layout,{x:b,y:E}=O.calGridItemPosition(l,p,f,x,y),{wPx:w,hPx:v}=O.calWHtoPx(u,g,f,x,y),C=t=>{let r=m.a.cloneDeep(e.groups),n=m.a.cloneDeep(o);n=Object(c.a)(Object(c.a)({},n),{},{currentSizeIndex:t,width:n.sizes[t].width,height:n.sizes[t].height}),r[a].cards.some((t,i)=>{if(t.id===n.id){r[a].cards[i]=n;let t=L(r[a].cards,e.layout.col,n.id);return r[a].cards=t,!0}return!1}),e.updateGroupList(r)};return i.a.createElement("div",null,h?i.a.createElement("div",{className:"card-shadow",style:{width:w,height:v,transform:"translate(".concat(b,"px, ").concat(E,"px)")}}):i.a.createElement("div",{ref:n,className:"card",style:{width:w,height:v,opacity:1,transform:"translate(".concat(b,"px, ").concat(E,"px)")}},i.a.createElement("div",{className:"card-actions",style:{position:"absolute",left:"70px",zIndex:1}},i.a.createElement(s.a,{onClick:()=>{r(d,a)}},"Delete"),o.sizes&&i.a.createElement(s.a,{disabled:o.currentSizeIndex+1>=(null===(t=o.sizes)||void 0===t?void 0:t.length),onClick:()=>{(()=>{const e=o.currentSizeIndex+1;e>=o.sizes.length||C(e)})()}},"+"),o.sizes&&i.a.createElement(s.a,{disabled:o.currentSizeIndex<=0,onClick:()=>{(()=>{const e=o.currentSizeIndex-1;e<0||C(e)})()}},"-"),i.a.createElement("b",null,d)),o.chartType&&i.a.createElement(ae,{data:o})))}const ie={CARD:"card"};function oe(e){const t=e.layout,{id:a,cards:r,index:o,groups:d,layout:c,handleLoad:l,moveCardInGroupItem:s}=e;Object(n.useEffect)(()=>{let e;const t=document.querySelector("#card-container");t&&(e=t.clientWidth),c.containerWidth!==e&&l()},[c]);const p=O.getContainerMaxHeight(r,c.rowHeight,c.margin),u=(t,a)=>{if(t.type===ie.CARD)return e.onCardDropInGroupItem(),a},[,g]=Object(P.a)({accept:ie.CARD,drop:t=>{u(t,e)},hover:(t,a)=>{const r=t;if(r.type===ie.CARD){if(e.shadowCard.id!==r.id)return void e.updateShadowCard(r);const t=e,n=a.getClientOffset(),i=document.getElementById("group"+t.id),o=null===i||void 0===i?void 0:i.getBoundingClientRect(),d=null===o||void 0===o?void 0:o.left,c=null===o||void 0===o?void 0:o.top;s(t,n.x-(d||0),n.y-(c||0))}}});return i.a.createElement("div",{className:"rglb_group-item",ref:g,id:"group"+a},i.a.createElement("div",{className:"group-item-container"},i.a.createElement("section",{id:"card-container",style:{height:p>t.containerHeight?p:t.containerHeight}},r.map(t=>i.a.createElement(re,{key:"".concat(o,"_").concat(t.id),groupIndex:o,card:t,group:e,groups:d,layout:e.layout,dropCard:u,updateShadowCard:e.updateShadowCard,updateGroupList:e.updateGroupList,deleteCard:e.deleteCard})))))}function de(e){const t=e.layout,{groups:a,setGroups:r,sections:o}=e,[d,l]=Object(n.useState)(e.layout),[s,p]=Object(n.useState)({}),[u,g]=Object(n.useState)(!1),h=()=>{u||(g(!0),setTimeout(()=>{let e;g(!1);const t=document.querySelector("#card-container");if(!t)return;e=t.clientWidth;const{containerPadding:n,margin:i,col:o}=d;let c=m.a.cloneDeep(d);const s=O.calColWidth(e,o,n,i),p=m.a.cloneDeep(a);m.a.forEach(p,e=>{let t=L(e.cards,o,null);e.cards=t}),c.calWidth=s,c.col=o,c.containerWidth=e,r(p),l(c)},500))};Object(n.useEffect)(()=>(window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)),[h]);const x=(t,n,i)=>{let o=m.a.cloneDeep(a);const{margin:l,containerWidth:u,col:g,rowHeight:h}=d,{gridX:f,gridY:x}=O.calGridXY(n,i,s.width,l,u,g,h);if(f===s.gridx&&x===s.gridy)return;m.a.forEach(o,e=>{m.a.remove(e.cards,e=>!0===e.isShadow)});const y=Object(c.a)(Object(c.a)({},s),{},{gridx:f,gridy:x});let b=t.index;if("number"==typeof b){o[b].cards.push(s);const t=D(o[b].cards,y,y.id,y.id,e.compactType);let a;"horizontal"===e.compactType?a=L(t,g,y.id):"vertical"===e.compactType&&(a=_(t)),o[b].cards=a,p(y),r(o)}},y=()=>{const t=m.a.cloneDeep(a),{compactType:n}=e;O.setPropertyValueForCards(t,"isShadow",!1),m.a.forEach(t,(e,a)=>{if("horizontal"===n){let r=L(t[a].cards,d.col,null);e.cards=r}else if("vertical"===n){let r=_(t[a].cards);e.cards=r}}),r(t),p({})},b=(e,t)=>{let n=a[t].cards.filter(t=>t.id!==e),i=L(n,4,null);a[t].cards=i;const o=[...a];r(o)};return i.a.createElement("div",null,o.map(e=>{var n;return i.a.createElement("div",{className:"section"},e.hasTab?i.a.createElement(f.a,{type:"card",defaultActiveKey:null===(n=a.find(t=>t.sectionId===e.id&&t.defaultTab))||void 0===n?void 0:n.tabValue},a.map((n,o)=>n.sectionId===e.id?i.a.createElement(f.a.TabPane,{tab:n.tabLabel,key:n.tabValue},i.a.createElement(oe,{key:n.id,id:n.id,type:n.type,index:o,cards:n.cards,length:a.length,groups:a,moveCardInGroupItem:x,onCardDropInGroupItem:y,layout:d,defaultLayout:t,shadowCard:s,updateShadowCard:p,updateGroupList:r,handleLoad:h,deleteCard:b})):i.a.createElement(i.a.Fragment,null))):i.a.createElement(i.a.Fragment,null,a.map((n,o)=>n.sectionId===e.id?i.a.createElement(oe,{key:n.id,id:n.id,type:n.type,index:o,cards:n.cards,length:a.length,groups:a,moveCardInGroupItem:x,onCardDropInGroupItem:y,layout:d,defaultLayout:t,shadowCard:s,updateShadowCard:p,updateGroupList:r,handleLoad:h,deleteCard:b}):i.a.createElement(i.a.Fragment,null))))}))}const ce="horizontal",le={containerWidth:1200,containerHeight:300,calWidth:380,rowHeight:50,col:4,margin:[20,10],containerPadding:[0,0]},se=[{id:"default_section",type:"section",hasTab:!1,groups:[{id:"default_group",sectionId:"default_section",type:"group",cards:[]}]}];function pe(){const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)([]);Object(n.useEffect)(()=>{const e=o();r(e);const a=e.reduce((e,t)=>[...e,...t.groups],[]);t(a)},[]);const o=()=>{return localStorage.getItem("ui-canvas")?JSON.parse(localStorage.getItem("ui-canvas")||""):se};return i.a.createElement(Q,null,i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"title"},i.a.createElement("span",null,"Canvas")),i.a.createElement("div",{className:"actions"},i.a.createElement(s.a,{type:"primary",onClick:()=>{(()=>{const t=m.a.cloneDeep(a);t.forEach(t=>{t.groups=e.filter(e=>e.sectionId===t.id)}),localStorage.setItem("ui-canvas",JSON.stringify(t))})()}},"Save"),i.a.createElement(s.a,{type:"primary",onClick:()=>{r(se),t(se.reduce((e,t)=>[...e,...t.groups],[]))}},"Clear"))),i.a.createElement("div",{className:"grid",id:"grid"},i.a.createElement(Z,null,i.a.createElement(de,{sections:a,groups:e,setGroups:t,compactType:ce,layout:le}))))}function ue(){const[e,t]=Object(n.useState)(!1),[a,r]=Object(n.useState)(""),[o,d]=Object(n.useState)([]),[h,m]=Object(n.useState)([]),[f,x]=Object(n.useState)(""),y=async e=>{if(!e&&f.length<=1)return;const n=e||f,i={id:Object(g.a)(),role:"USER",text:n};d([...o,i]),t(!0),x("");const l={sessionId:"001",messages:[{id:"1",role:"USER",text:"Generate a Pie Chart"},{id:"a1",role:"AI",text:"A pie chart has been generated. \n          You can drag and drop it onto the canvas on the right.",widgets:[{title:"",chartType:"pie"}]}]};l.sessionId&&!a&&r(l.sessionId),setTimeout(()=>{t(!1),d(l.messages);const e=l.messages[l.messages.length-1];e.widgets&&m([...h,Object(c.a)(Object(c.a)({},e.widgets[0]),{},{sessionId:l.sessionId,id:e.id})])},1e3)},b=e=>{var t;const{chat:r}=e;return i.a.createElement("div",{className:"message"},i.a.createElement("div",{className:"chat-container ".concat("USER"===r.role?"right":"")},i.a.createElement("div",{className:"chat-bubble"},r.text)),"AI"===r.role&&(null===(t=r.widgets)||void 0===t?void 0:t.length)&&i.a.createElement(te,{data:Object(c.a)(Object(c.a)({},r.widgets[0]),{},{sessionId:a,id:r.id})}))};return i.a.createElement(p.a,{backend:u.a},i.a.createElement(Y,null,i.a.createElement("div",{className:"chat"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"chatroom"},i.a.createElement("div",{className:"placeholder"},i.a.createElement("div",{onClick:()=>{y("Generate a Pie Chart")}},"Generate a Pie Chart")),i.a.createElement("div",{className:"messages-wrapper"},null===o||void 0===o?void 0:o.map(e=>i.a.createElement(b,{key:e.id,chat:e})),e&&i.a.createElement("div",{className:"loading"},i.a.createElement(l.a,null))),i.a.createElement("div",{className:"input"},i.a.createElement(X,{autoFocus:!0,value:f,onChange:e=>{let{target:{value:t}}=e;return x(t)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),y())},"data-testid":"search-input",rows:10,placeholder:"Looking for answers or need help? Type your message\u2014I\u2019m ready when you are."}),i.a.createElement(s.a,{onClick:()=>{y()}},"Search"))))),i.a.createElement(pe,null)))}var ge=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,186)).then(t=>{let{getCLS:a,getFID:r,getFCP:n,getLCP:i,getTTFB:o}=t;a(e),r(e),n(e),i(e),o(e)})};d.a.createRoot(document.getElementById("root")).render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ue,null))),ge()}},[[117,1,2]]]);
//# sourceMappingURL=main.22662e1a.chunk.js.map